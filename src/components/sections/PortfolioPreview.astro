---
/**
 * PortfolioPreview — Section 03 (Portfolio)
 * Grille bento asymétrique avec rounded-lg,
 * hover overlay avec infos projet (titre, localisation, catégorie),
 * effet translateY(-8px) + shadow au hover
 */
import Section from '@components/ui/Section.astro';
import Container from '@components/ui/Container.astro';
import Button from '@components/ui/Button.astro';
import TextMorph from '@components/react/TextMorph';
import { t, tArray, getLocalizedPath, type Locale } from '@i18n/index';

interface Props { lang?: Locale; }
const lang = Astro.props.lang ?? 'fr';

const projects = [
  {
    title: 'Villa Azur',
    category: t('portfolio', 'catRenovation', lang),
    location: 'Saint-Jean-Cap-Ferrat',
    image: '/images/projets/villa-azur-1.jpg',
    slug: getLocalizedPath('/projets/villa-azur', lang),
    gridClass: 'md:col-span-2 md:row-span-2',
  },
  {
    title: 'Penthouse Croisette',
    category: t('portfolio', 'catRenovation', lang),
    location: 'Cannes',
    image: '/images/projets/penthouse-croisette-1.jpg',
    slug: getLocalizedPath('/projets/penthouse-croisette', lang),
    gridClass: 'md:col-span-2',
  },
  {
    title: 'Suite Riviera',
    category: t('portfolio', 'catAmenagement', lang),
    location: 'Nice',
    image: '/images/projets/suite-riviera-1.jpg',
    slug: getLocalizedPath('/projets/suite-riviera', lang),
    gridClass: '',
  },
  {
    title: "L'Ecrin",
    category: t('portfolio', 'catRenovation', lang),
    location: 'Monaco',
    image: '/images/projets/ecrin-monaco-1.jpg',
    slug: getLocalizedPath('/projets/ecrin-monaco', lang),
    gridClass: '',
  },
  {
    title: 'Villa Horizon',
    category: t('portfolio', 'catConstruction', lang),
    location: 'Ramatuelle',
    image: '/images/projets/villa-horizon-1.jpg',
    slug: getLocalizedPath('/projets/villa-horizon', lang),
    gridClass: 'md:col-span-2',
  },
  {
    title: 'Bastide Provencale',
    category: t('portfolio', 'catRenovation', lang),
    location: 'Mougins',
    image: '/images/projets/bastide-provencale-1.jpg',
    slug: getLocalizedPath('/projets/bastide-provencale', lang),
    gridClass: 'md:col-span-2',
  },
];
---

<Section background="warm" padding="lg">
  <Container>

    {/* En-tête */}
    <div class="relative mb-16 md:mb-20" data-reveal>
      <span class="section-number-xl">03</span>
      <span class="section-number">{t('portfolio', 'number', lang)}</span>
      <h2 class="group/title text-section text-primary-dark mt-6 cursor-default">
        <span class="font-heading font-light uppercase text-primary-dark/10 transition-colors duration-700 group-hover/title:text-primary-dark/30">{t('portfolio', 'title1', lang)}</span>
        <span class="font-display font-extralight text-primary-dark/15 mx-1 select-none">/</span>
        <TextMorph client:visible words={tArray('portfolio', 'morphWords', lang)} className="font-display font-bold uppercase text-primary-dark transition-colors duration-700 group-hover/title:text-primary-dark/30" />
      </h2>
      <p class="font-body text-lg font-light text-[var(--color-text-light)] mt-4 max-w-xl">
        {t('portfolio', 'subtitle', lang)}
      </p>
    </div>

    {/* Grille bento asymétrique */}
    <div class="grid grid-cols-1 md:grid-cols-4 md:grid-rows-[420px_420px_380px] gap-4 md:gap-5" data-mosaic>
      {projects.map((project) => (
        <a
          href={project.slug}
          data-mosaic-item
          class:list={[
            'group relative overflow-hidden cursor-pointer block rounded-lg transition-all duration-base hover:-translate-y-2 hover:shadow-large',
            project.gridClass,
          ]}
        >
          {/* Image avec zoom au hover */}
          <img
            src={project.image}
            alt={project.title}
            class="w-full h-full object-cover transition-transform duration-slow ease-smooth group-hover:scale-[1.06]"
            loading="lazy"
          />

          {/* Gradient subtil permanent → overlay au hover */}
          <div class="absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent group-hover:from-black/70 group-hover:via-black/40 group-hover:to-black/20 transition-all duration-base ease-smooth rounded-lg" />

          {/* Hover overlay : infos projet centrées */}
          <div class="absolute inset-0 flex flex-col items-center justify-center text-center opacity-0 group-hover:opacity-100 transition-all duration-base ease-smooth p-6">
            <span class="text-[11px] font-heading font-medium text-accent-gold uppercase tracking-[0.2em] mb-2 translate-y-4 group-hover:translate-y-0 transition-transform duration-base delay-150">
              {project.category}
            </span>
            <h3 class="font-display text-2xl md:text-3xl font-bold uppercase text-white mb-2 translate-y-3 group-hover:translate-y-0 transition-transform duration-base delay-75">
              {project.title}
            </h3>
            <span class="text-xs font-heading font-light text-white/60 translate-y-2 group-hover:translate-y-0 transition-transform duration-base delay-200">
              {project.location}
            </span>
          </div>

          {/* Label catégorie visible par défaut */}
          <div class="absolute bottom-0 left-0 right-0 p-5 group-hover:opacity-0 transition-opacity duration-fast">
            <span class="text-xs font-heading font-medium text-white/80 uppercase tracking-[0.12em]">
              {project.category}
            </span>
          </div>
        </a>
      ))}
    </div>

    {/* CTA */}
    <div class="text-center mt-16 md:mt-20">
      <Button href={getLocalizedPath('/projets', lang)} variant="outline" size="lg">
        {t('portfolio', 'cta', lang)}
      </Button>
    </div>

  </Container>
</Section>
